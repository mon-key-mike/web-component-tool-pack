/*!
 * w-package-tools v1.0.2
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("lodash"),require("fs")):"function"==typeof define&&define.amd?define(["exports","lodash","fs"],b):(a=a||self,b(a["w-package-tools"]={},a.lodash,a.fs))})(this,function(a,b,d){'use strict';function c(a){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c(a)}function e(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function f(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"./package.json",b=d.readFileSync(a,"utf8");return JSON.parse(b)}function g(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"./package.json",e=JSON.stringify(a,null,2);d.writeFileSync(b,e,"utf8")}function h(){return i.apply(this,arguments)}function i(){return i=s(r.mark(function a(){var c,d,e,h,i=arguments;return r.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=0<i.length&&void 0!==i[0]?i[0]:"./package.json",d=f(c),e=d.version,h=b.split(e,"."),h[2]=b.toString(b.toNumber(h[2])+1),d.version=b.join(h,"."),g(d,c),console.log("now version: "+d.version);case 8:case"end":return a.stop();}},a)})),i.apply(this,arguments)}function j(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"./README.md",e=d.readFileSync(a,"utf8");return{content:e,lines:b.split(e,"\r\n")}}function k(){return l.apply(this,arguments)}function l(){return l=s(r.mark(function a(){var b,e,g,h,i,k,l,m,n=arguments;return r.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b=0<n.length&&void 0!==n[0]?n[0]:"./README.md",e=1<n.length&&void 0!==n[1]?n[1]:"./package.json",g=f(e),h=j(b),i="(".concat(g.name,"@)+(\\d+.\\d+.\\d+)"),k="".concat(g.name,"@").concat(g.version),l=new RegExp(i,"g"),m=h.content.replace(l,k),d.writeFileSync(b,m,"utf8");case 9:case"end":return a.stop();}},a)})),l.apply(this,arguments)}function m(a){d.readdirSync(a).forEach(function(b){var c=a+"/"+b;d.lstatSync(c).isDirectory()?m(c):d.unlinkSync(c)}),d.rmdirSync(a)}function n(a){d.existsSync(a)&&d.readdirSync(a).forEach(function(b){var c=a+"/"+b;d.lstatSync(c).isDirectory()?m(c):d.unlinkSync(c)})}function o(a){d.existsSync(a)&&(d.readdirSync(a).forEach(function(b){var c=a+"/"+b;d.lstatSync(c).isDirectory()?o(c):d.unlinkSync(c)}),d.rmdirSync(a))}function p(a){if(!d.existsSync(a))return[];var b=d.readdirSync(a,{withFileTypes:!0});return b=b.filter(function(a){var c=!a.isDirectory();return c}),b=b.map(function(a){return a.name}),b}b=b&&b.hasOwnProperty("default")?b["default"]:b,d=d&&d.hasOwnProperty("default")?d["default"]:d;var q=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a){var b=function(a){function b(a,b,c,d){var f=b&&b.prototype instanceof e?b:e,g=Object.create(f.prototype),h=new n(d||[]);return g._invoke=j(a,c,h),g}function d(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function e(){}function f(){}function g(){}function h(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function i(a){function b(e,f,g,h){var i=d(a[e],a,f);if("throw"===i.type)h(i.arg);else{var j=i.arg,k=j.value;return k&&"object"===c(k)&&s.call(k,"__await")?Promise.resolve(k.__await).then(function(a){b("next",a,g,h)},function(a){b("throw",a,g,h)}):Promise.resolve(k).then(function(a){j.value=a,g(j)},function(a){return b("throw",a,g,h)})}}function e(a,c){function d(){return new Promise(function(d,e){b(a,c,d,e)})}return f=f?f.then(d,d):d()}var f;this._invoke=e}function j(a,b,c){var e="suspendedStart";return function(f,g){if("executing"===e)throw new Error("Generator is already running");if("completed"===e){if("throw"===f)throw g;return p()}for(c.method=f,c.arg=g;;){var h=c.delegate;if(h){var i=k(h,c);if(i){if(i===x)continue;return i}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===e)throw e="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);e="executing";var j=d(a,b,c);if("normal"===j.type){if(e=c.done?"completed":"suspendedYield",j.arg===x)continue;return{value:j.arg,done:c.done}}"throw"===j.type&&(e="completed",c.method="throw",c.arg=j.arg)}}}function k(a,b){var c=a.iterator[b.method];if(c===q){if(b.delegate=null,"throw"===b.method){if(a.iterator["return"]&&(b.method="return",b.arg=q,k(a,b),"throw"===b.method))return x;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}var e=d(c,a.iterator,b.arg);if("throw"===e.type)return b.method="throw",b.arg=e.arg,b.delegate=null,x;var f=e.arg;if(!f)return b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,x;if(f.done)b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=q);else return f;return b.delegate=null,x}function l(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function m(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function n(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(l,this),this.reset(!0)}function o(a){if(a){var b=a[u];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function b(){for(;++c<a.length;)if(s.call(a,c))return b.value=a[c],b.done=!1,b;return b.value=q,b.done=!0,b};return d.next=d}}return{next:p}}function p(){return{value:q,done:!0}}var q,r=Object.prototype,s=r.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",v=t.asyncIterator||"@@asyncIterator",w=t.toStringTag||"@@toStringTag";a.wrap=b;var x={},y={};y[u]=function(){return this};var z=Object.getPrototypeOf,A=z&&z(z(o([])));A&&A!==r&&s.call(A,u)&&(y=A);var B=g.prototype=e.prototype=Object.create(y);return f.prototype=B.constructor=g,g.constructor=f,g[w]=f.displayName="GeneratorFunction",a.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===f||"GeneratorFunction"===(b.displayName||b.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,!(w in a)&&(a[w]="GeneratorFunction")),a.prototype=Object.create(B),a},a.awrap=function(a){return{__await:a}},h(i.prototype),i.prototype[v]=function(){return this},a.AsyncIterator=i,a.async=function(c,d,e,f){var g=new i(b(c,d,e,f));return a.isGeneratorFunction(d)?g:g.next().then(function(a){return a.done?a.value:g.next()})},h(B),B[w]="Generator",B[u]=function(){return this},B.toString=function(){return"[object Generator]"},a.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function c(){for(;b.length;){var d=b.pop();if(d in a)return c.value=d,c.done=!1,c}return c.done=!0,c}},a.values=o,n.prototype={constructor:n,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=q,this.done=!1,this.delegate=null,this.method="next",this.arg=q,this.tryEntries.forEach(m),!a)for(var b in this)"t"===b.charAt(0)&&s.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=q)},stop:function(){this.done=!0;var a=this.tryEntries[0],b=a.completion;if("throw"===b.type)throw b.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,d&&(c.method="next",c.arg=q),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;0<=d;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=s.call(e,"catchLoc"),h=s.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);}else if(!h)throw new Error("try statement without catch or finally");else if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}},abrupt:function(a,b){for(var c,d=this.tryEntries.length-1;0<=d;--d)if(c=this.tryEntries[d],c.tryLoc<=this.prev&&s.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var e=c;break}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?(this.method="next",this.next=e.finallyLoc,x):this.complete(f)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),x},finish:function(a){for(var b,c=this.tryEntries.length-1;0<=c;--c)if(b=this.tryEntries[c],b.finallyLoc===a)return this.complete(b.completion,b.afterLoc),m(b),x},catch:function(a){for(var b,c=this.tryEntries.length-1;0<=c;--c)if(b=this.tryEntries[c],b.tryLoc===a){var d=b.completion;if("throw"===d.type){var e=d.arg;m(b)}return e}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:o(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=q),x}},a}(a.exports);try{regeneratorRuntime=b}catch(a){Function("r","regeneratorRuntime = r")(b)}}),r=q,s=function(a){return function(){var b=this,c=arguments;return new Promise(function(d,f){function g(a){e(i,d,f,g,h,"next",a)}function h(a){e(i,d,f,g,h,"throw",a)}var i=a.apply(b,c);g(void 0)})}};a.addVersion=h,a.cleanFolder=n,a.deleteFolder=o,a.getFiles=p,a.getPks=f,a.getReadme=j,a.modifyReadme=k,a.pmSeries=function(a,b){return new Promise(function(c,d){a.reduce(function(a,c){return a.then(function(){return b(c)})},Promise.resolve()).then(function(){c()})["catch"](function(a){d(a)})})},a.setPks=g,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=w-package-tools.umd.js.map
