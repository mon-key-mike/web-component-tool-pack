/*!
 * w-package-tools v1.0.21
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash"),require("fs"),require("path")):"function"==typeof define&&define.amd?define(["exports","lodash","fs","path"],e):e((n=n||self)["w-package-tools"]={},n.lodash,n.fs,n.path)}(this,(function(n,e,t,r){"use strict";function i(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./package.json",e=t.readFileSync(n,"utf8");return JSON.parse(e)}function o(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"./package.json",r=JSON.stringify(n,null,2);t.writeFileSync(e,r,"utf8")}function c(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./README.md",r=t.readFileSync(n,"utf8");return{content:r,lines:e.split(r,"\r\n")}}function a(n){return n=function(n){return n=(n=n.replace(/\\/g,r.sep)).replace(/\//g,r.sep)}(n),e.split(n,r.sep)}function u(n,e){return function(n,e){return n.substr(0,e)}(n,n.length-e)}function s(n,e,t){for(var r=[],i=0;i<n.length;i++){var o=n[i];if(o.indexOf(e)>=0){var c=o.substring(o.indexOf(e)+e.length,o.length);r.push(c)}else if(r.length>0&&(r.push(o),o===t))break}return r.join("\r\n")}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,r=r&&r.hasOwnProperty("default")?r.default:r,n.addVersion=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./package.json",t=i(n),r=t.version,c=e.split(r,".");c[2]=e.toString(e.toNumber(c[2])+1),t.version=e.join(c,"."),o(t,n),console.log("now version: "+t.version)},n.cleanFolder=function(n){t.existsSync(n)?t.readdirSync(n).forEach((function(e,r){var i=n+"/"+e;t.lstatSync(i).isDirectory()?function n(e){t.readdirSync(e).forEach((function(r,i){var o=e+"/"+r;t.lstatSync(o).isDirectory()?n(o):t.unlinkSync(o)})),t.rmdirSync(e)}(i):t.unlinkSync(i)})):t.mkdirSync(n)},n.createFolder=function(n){var i=a(n),o=[];e.each(i,(function(n){o.push(n+r.sep);var i=e.join(o,"");n.indexOf(":")<0&&(t.existsSync(i)||t.mkdirSync(i))}))},n.deleteFolder=function n(e){t.existsSync(e)&&(t.readdirSync(e).forEach((function(r,i){var o=e+"/"+r;t.lstatSync(o).isDirectory()?n(o):t.unlinkSync(o)})),t.rmdirSync(e))},n.getFiles=function(n){if(!t.existsSync(n))return[];var e=t.readdirSync(n,{withFileTypes:!0});return e=(e=e.filter((function(n){return!n.isDirectory()}))).map((function(n){return n.name}))},n.getPks=i,n.getReadme=c,n.modifyReadme=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./README.md",e=i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"./package.json"),r=c(n),o="(".concat(e.name,"@)+(\\d+.\\d+.\\d+)"),a="".concat(e.name,"@").concat(e.version),u=new RegExp(o,"g"),s=r.content.replace(u,a);t.writeFileSync(n,s,"utf8")},n.parseVueCode=function(n){var t,r=n.split("\r\n");t=new RegExp("<template>[\\s\\S]+</template>","g");var i=n.match(t)[0],o=i.split("\r\n");o=e.drop(o,2),i=(o=e.dropRight(o,2)).join("\r\n");var c=s(r,"mounted: function() {","    },");c=c?u(c="function() {"+c,1):"function() { return {} }";var a=s(r,"data: function() {","    },");a=a?u(a="function() {"+a,1):"function() { return {} }";var f=s(r,"computed:","    },");f=f?u(f,1):"{}";var d=s(r,"methods:","    },");d=d?u(d,1):"{}";var l=s(r,"'actions':","            ],");return{tmp:i,mounted:c,data:a,computed:f,methods:d,action:l=l?u(l,1):"[]"}},n.pmSeries=function(n,e){return new Promise((function(t,r){n.reduce((function(n,t){return n.then((function(n){return e(t)}))}),Promise.resolve()).then((function(){t()})).catch((function(n){r(n)}))}))},n.setPks=o,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=w-package-tools.umd.js.map
