/*!
 * w-package-tools v1.0.27
 * (c) 2018-2020 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash"),require("fs")):"function"==typeof define&&define.amd?define(["exports","lodash","fs"],e):e((n=n||self)["w-package-tools"]={},n.lodash,n.fs)}(this,(function(n,e,t){"use strict";function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./package.json",e=t.readFileSync(n,"utf8");return JSON.parse(e)}function o(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"./package.json",r=JSON.stringify(n,null,2);t.writeFileSync(e,r,"utf8")}function i(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./README.md",r=t.readFileSync(n,"utf8");return{content:r,lines:e.split(r,"\r\n")}}function c(n,e){return function(n,e){return n.substr(0,e)}(n,n.length-e)}function a(n,e,t){for(var r=[],o=0;o<n.length;o++){var i=n[o];if(i.indexOf(e)>=0){var c=i.substring(i.indexOf(e)+e.length,i.length);r.push(c)}else if(r.length>0&&(r.push(i),i===t))break}return r.join("\r\n")}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n.addVersion=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./package.json",t=r(n),i=t.version,c=e.split(i,".");c[2]=e.toString(e.toNumber(c[2])+1),t.version=e.join(c,"."),o(t,n),console.log("now version: "+t.version)},n.cleanFolder=function(n){t.existsSync(n)?t.readdirSync(n).forEach((function(e,r){var o=n+"/"+e;t.lstatSync(o).isDirectory()?function n(e){t.readdirSync(e).forEach((function(r,o){var i=e+"/"+r;t.lstatSync(i).isDirectory()?n(i):t.unlinkSync(i)})),t.rmdirSync(e)}(o):t.unlinkSync(o)})):t.mkdirSync(n)},n.createFolder=function(n){try{t.mkdirSync(n,{recursive:!0})}catch(n){console.log("createFolder catch",n)}},n.deleteFolder=function n(e){t.existsSync(e)&&(t.readdirSync(e).forEach((function(r,o){var i=e+"/"+r;t.lstatSync(i).isDirectory()?n(i):t.unlinkSync(i)})),t.rmdirSync(e))},n.getFiles=function(n){if(!t.existsSync(n))return[];var e=t.readdirSync(n,{withFileTypes:!0});return e=(e=e.filter((function(n){return!n.isDirectory()}))).map((function(n){return n.name}))},n.getPks=r,n.getReadme=i,n.modifyReadme=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./README.md",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"./package.json",o=r(e),c=i(n),a="(".concat(o.name,"@)+(\\d+.\\d+.\\d+)"),u="".concat(o.name,"@").concat(o.version),s=new RegExp(a,"g"),f=c.content.replace(s,u);t.writeFileSync(n,f,"utf8")},n.parseVueCode=function(n){var t,r=n.split("\r\n");t=new RegExp("<template>[\\s\\S]+</template>","g");var o=n.match(t)[0],i=o.split("\r\n");i=e.drop(i,2),o=(i=e.dropRight(i,2)).join("\r\n");var u=a(r,"mounted: function() {","    },");u=u?c(u="function() {"+u,1):"function() { return {} }";var s=a(r,"data: function() {","    },");s=s?c(s="function() {"+s,1):"function() { return {} }";var f=a(r,"computed:","    },");f=f?c(f,1):"{}";var d=a(r,"methods:","    },");d=d?c(d,1):"{}";var l=a(r,"'actions':","            ],");return{tmp:o,mounted:u,data:s,computed:f,methods:d,action:l=l?c(l,1):"[]"}},n.pmSeries=function(n,e){return new Promise((function(t,r){n.reduce((function(n,t){return n.then((function(n){return e(t)}))}),Promise.resolve()).then((function(){t()})).catch((function(n){r(n)}))}))},n.setPks=o,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=w-package-tools.umd.js.map
